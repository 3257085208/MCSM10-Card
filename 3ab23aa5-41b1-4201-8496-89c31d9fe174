// 财务：
function connectWebSocket() {
if (currentWebSocket && currentWebSocket.readyState !== WebSocket.CLOSED) {
currentWebSocket.close(1000, '切换到新连接');
}
if (!daemonId || !instanceId) {
console.error('缺少必要的参数: daemonId 或 instanceId');
return;
}
currentConnectionId = `${daemonId}-${instanceId}`;
lastConnectionTime = Date.now();
const currentProtocol = window.location.protocol;
const domainRequestUrl =
`${currentProtocol}//card.i8-mc.cn/${daemonId}`;
// 修改 domain.example.com 为域名请求接口
// MCSM面板卡片：
function connectWebSocket() {
if (currentWebSocket && currentWebSocket.readyState !== WebSocket.CLOSED) {
currentWebSocket.close(1000, '切换到新连接');
}
const params = parseQueryParams();
if (!params || !params.daemonId || !params.instanceId) {
console.error('缺少必要的参数: daemonId 或 instanceId');
return;
}
currentConnectionId = `${params.daemonId}-${params.instanceId}`;
lastConnectionTime = Date.now();
const currentProtocol = window.location.protocol;
const domainRequestUrl =
`${currentProtocol}//card.i8-mc.cn/${params.daemonId}`;
// 修改 domain.example.com 为域名请求接口
// 修改后，在MCSM面板示例终端页面的右上角点击 自定义布局 - 新增卡片 - 内嵌网页框，上
传该html
// 最小高度100px，宽度12格
